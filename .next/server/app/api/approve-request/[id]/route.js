"use strict";(()=>{var e={};e.id=8253,e.ids=[8253],e.modules={38013:e=>{e.exports=require("mongodb")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},69983:(e,o,t)=>{t.r(o),t.d(o,{headerHooks:()=>m,originalPathname:()=>h,patchFetch:()=>b,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>w});var r={};t.r(r),t.d(r,{PUT:()=>p});var n=t(95419),a=t(69108),i=t(99678),s=t(78070),c=t(41989),d=t(38013);async function p(e){try{let o=e.nextUrl.pathname.split("/").pop(),t=(await e.json()).approved;console.log(t),console.log(o),await (0,c.connectDB)();let r=await c.client.db("eoddb").collection("ideaRequest").updateOne({ideaId:o},{$set:{approved:t}}),n=await c.client.db("eoddb").collection("ideaApply").countDocuments({ideaId:o,approved:!0}),a=await c.client.db("eoddb").collection("ideaRequest").countDocuments({ideaId:o,approved:!0});return await c.client.db("eoddb").collection("ideas").updateOne({_id:new d.ObjectId(o)},{$set:{matched:n>0||a>0}}),s.Z.json(r,{status:200})}catch(e){return console.error("Error updating idea approval status:",e),s.Z.error()}}let u=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/approve-request/[id]/route",pathname:"/api/approve-request/[id]",filename:"route",bundlePath:"app/api/approve-request/[id]/route"},resolvedPagePath:"C:\\Users\\fire1\\OneDrive\\바탕 화면\\eod\\app\\api\\approve-request\\[id]\\route.tsx",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:v,serverHooks:g,headerHooks:m,staticGenerationBailout:w}=u,h="/api/approve-request/[id]/route";function b(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:v})}},41989:(e,o,t)=>{let{MongoClient:r,ServerApiVersion:n}=t(38013),a=new r("mongodb+srv://kimwoojin:dnwls12@kimcluster.vi2fpad.mongodb.net/?retryWrites=true&w=majority",{serverApi:{version:n.v1,strict:!0,deprecationErrors:!0}});async function i(){try{return await a.connect(),console.log("Connected to MongoDB!"),a}catch(e){throw console.error("Error connecting to MongoDB:",e),e}}async function s(){try{await a.close(),console.log("Closed MongoDB connection.")}catch(e){console.error("Error closing MongoDB connection:",e)}}e.exports={connectDB:i,closeConnection:s,client:a}}};var o=require("../../../../webpack-runtime.js");o.C(e);var t=e=>o(o.s=e),r=o.X(0,[1638,6206],()=>t(69983));module.exports=r})();