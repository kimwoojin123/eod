(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{3476:function(e,a,s){Promise.resolve().then(s.bind(s,8061))},8061:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return m}});var l=s(3827),r=s(4090),d=s(8792);let t=e=>!!e&&/^[a-zA-Z]*([가-힣]{1,2}[a-zA-Z]*)*$/.test(e),n=e=>/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]{6,12}$/.test(e),i=e=>/^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,12}$/.test(e),c=e=>/^[^\s@]+@[^\s@]+\.[^\s@]{3,}$/.test(e);var o=e=>{let{onAddressSelect:a}=e,s=()=>{new window.daum.Postcode({oncomplete:function(e){a(e)}}).open()};return(0,r.useEffect)(()=>{if(!window.daum){let e=document.createElement("script");e.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",e.async=!0,e.onload=()=>{console.log("Daum 우편번호 서비스 스크립트가 로드되었습니다.")},document.head.appendChild(e)}},[]),(0,l.jsx)("div",{children:(0,l.jsx)("button",{onClick:e=>{e.preventDefault(),s()},children:"우편번호 찾기"})})};function m(){let[e,a]=(0,r.useState)({username:"",password:"",confirmPassword:"",name:"",email:"",address:"",phoneNumber:"",detailedAddress:""}),[s,m]=(0,r.useState)({isValidName:!0,isValidUsername:!0,isValidPassword:!0,isValidConfirmPassword:!0,isValidEmail:!0,isValidPhoneNumber:!0}),u=l=>{let{name:r,value:d}=l.target;a({...e,[r]:d}),"confirmPassword"===r?m({...s,isValidConfirmPassword:e.password===d}):m({...s,["isValid"+r.charAt(0).toUpperCase()+r.slice(1)]:!0})},p=async a=>{a.preventDefault();let{name:s,username:l,password:r,email:d,address:o,detailedAddress:u,phoneNumber:p}=e,h=t(s),x=n(l),f=i(r),b=c(d),w=e.password===e.confirmPassword,N=null!==e.phoneNumber.match(/^\d{3}-\d{4}-\d{4}$/);if(m({isValidName:h,isValidUsername:x,isValidPassword:f,isValidConfirmPassword:w,isValidEmail:b,isValidPhoneNumber:N}),h&&x&&f&&b&&w&&N)try{let e="".concat(o," ").concat(u).trim(),a=new FormData;a.append("name",s),a.append("username",l),a.append("password",r),a.append("email",d),a.append("address",e),a.append("phoneNumber",p),(await fetch("/api/signup",{method:"POST",body:a})).ok?(alert("회원가입이 완료되었습니다"),window.location.href="/"):alert("회원가입에 실패하였습니다.")}catch(e){console.error("Error:",e)}},h=async()=>{let{username:a}=e;if(!n(a)){alert("아이디 형식이 유효하지 않습니다. 6~12글자,영문,숫자로 작성하세요(특수문자 제한)");return}try{let e=await fetch("/checkUsername",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a})});e.ok?(await e.json()).isDuplicate?alert("이미 사용 중인 아이디입니다."):alert("사용 가능한 아이디입니다."):alert("중복 조회에 실패했습니다.")}catch(e){console.error("Error checking duplicate username:",e)}};return(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center h-screen",children:[(0,l.jsx)("h1",{className:"mb-10 text-3xl font-bold",children:"회원가입 페이지"}),(0,l.jsxs)("form",{className:"w-full max-w-md",onSubmit:p,children:[(0,l.jsxs)("div",{className:"mb-6 flex flex-col",children:[(0,l.jsx)("div",{className:"relative mb-4 flex items-center",children:(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("input",{className:"w-full border p-2 ".concat(s.isValidName?"border-black":"border-red-500"),type:"text",value:e.name,name:"name",placeholder:"이름",onChange:u}),s.isValidName?null:(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"이름을 확인하세요"})]})}),(0,l.jsxs)("div",{className:"relative mb-4 flex items-center",children:[(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("input",{className:"w-full border p-2 ".concat(s.isValidUsername?"border-black":"border-red-500"),type:"text",value:e.username,name:"username",placeholder:"아이디",onChange:u}),!s.isValidUsername&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"6~12글자, 영문, 숫자로 작성하세요 (특수문자 제한)"})]}),(0,l.jsx)("button",{type:"button",onClick:h,className:"bg-blue-500 w-32 h-12 text-white py-0 px-4 rounded ml-2",children:"중복조회"})]}),(0,l.jsx)("div",{className:"relative mb-4 flex items-center",children:(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("input",{className:"w-full border p-2 border-black ".concat(s.isValidPassword?"":"border-red-500"),type:"password",value:e.password,name:"password",placeholder:"비밀번호",onChange:u}),!s.isValidPassword&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"8~20글자, 영문,숫자,특수문자로 작성하세요"})]})}),(0,l.jsx)("input",{className:"w-full border p-2 mb-4 border-black ".concat(s.isValidConfirmPassword?"":"border-red-500"),type:"password",value:e.confirmPassword,name:"confirmPassword",placeholder:"비밀번호 확인",onChange:u}),!s.isValidConfirmPassword&&(0,l.jsx)("p",{style:{color:"red",fontSize:10},children:"비밀번호가 일치하지 않습니다"}),(0,l.jsx)("div",{className:"relative mb-4 flex items-center",children:(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("input",{className:"w-full border p-2 ".concat(s.isValidEmail?"border-black":"border-red-500"),type:"text",value:e.email,name:"email",placeholder:"이메일",onChange:u}),s.isValidEmail?null:(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"이메일을 다시 확인 후 입력해주세요"})]})}),(0,l.jsx)("input",{className:"w-full border p-2 ".concat(s.isValidPhoneNumber?"border-black":"border-red-500"),type:"text",value:e.phoneNumber,name:"phoneNumber",placeholder:"전화번호",onChange:l=>{let r=l.target.value;if((r=r.replace(/[^\d]/g,"")).length>11)return;r.length>=3&&r.length<=7?r=r.replace(/(\d{3})(\d{1,4})/,"$1-$2"):r.length>7&&(r=r.replace(/(\d{3})(\d{4})(\d{1,4})/,"$1-$2-$3")),a({...e,phoneNumber:r});let d=null!==r.match(/^\d{3}-\d{4}-\d{4}$/);m({...s,isValidPhoneNumber:d})}}),(0,l.jsx)("div",{className:"w-full",children:s.isValidPhoneNumber?null:(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"- 를 사용하여 작성해주세요."})}),(0,l.jsx)("div",{className:"relative flex items-center",children:(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(o,{onAddressSelect:s=>{a({...e,address:s.address})}})}),(0,l.jsx)("input",{className:"w-full border p-2 mb-4 border-black",type:"text",value:e.address,name:"address",placeholder:"주소",onChange:u}),(0,l.jsx)("input",{className:"w-full border p-2 border-black",type:"text",value:e.detailedAddress,name:"detailedAddress",placeholder:"상세주소",onChange:s=>{let{value:l}=s.target;a({...e,detailedAddress:l})}}),(0,l.jsx)("div",{className:"relative mb-4 flex items-center"})]})})]}),(0,l.jsx)("button",{type:"submit",className:"bg-green-500 text-white py-2 px-4 rounded mt-4 w-full",children:"가입하기"})]}),(0,l.jsx)(d.default,{className:"mt-8",href:"/login",children:"로그인페이지로"})]})}},8792:function(e,a,s){"use strict";s.d(a,{default:function(){return r.a}});var l=s(5250),r=s.n(l)}},function(e){e.O(0,[250,971,69,744],function(){return e(e.s=3476)}),_N_E=e.O()}]);