(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[788],{9372:function(e,t,n){Promise.resolve().then(n.bind(n,9939))},9939:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(3827),o=n(7907),a=n(4090),l=n(703),s=n(8245),i=n.n(s),c=n(4095);function u(){let[e,t]=(0,a.useState)(!1),[n,l]=(0,a.useState)(""),[s,u]=(0,a.useState)(!1),d=(0,o.usePathname)().split("/").pop(),f=async()=>{try{let e=(0,c.I)();if(!(await fetch("/api/fund/".concat(d),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:n,username:e})})).ok)throw Error("Failed to fund");u(!0),l("")}catch(e){console.error("Error funding:",e)}},h=()=>{t(!1),u(!1)};return(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{onClick:()=>t(!0),className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:"펀딩하기"}),(0,r.jsx)(i(),{isOpen:e,onRequestClose:h,ariaHideApp:!1,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)",width:"100%",height:"100vh",zIndex:"10",position:"fixed",top:"0",left:"0"},content:{display:"flex",flexDirection:"column",alignItems:"center",width:"360px",height:"180px",zIndex:"150",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"2px 2px 2px rgba(0, 0, 0, 0.25)",backgroundColor:"white",justifyContent:"center",overflow:"auto",whiteSpace:"pre-line"}},contentLabel:"펀딩 모달",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"mb-4 text-lg text-center",children:"펀딩이 성공적으로 완료되었습니다."}),(0,r.jsx)("button",{onClick:h,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:"닫기"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"text",placeholder:"펀딩할 금액을 입력하세요",value:n,onChange:e=>l(e.target.value),className:"border border-gray-300 rounded mb-2 px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{onClick:f,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:"펀딩하기"})]})})]})}function d(){let e=(0,o.usePathname)().split("/").pop(),[t,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let t=async()=>{try{let t=await fetch("/api/funding-detail/".concat(e));if(!t.ok)throw Error("Failed to fetch funding data");let{funding:r,idea:o}=await t.json();n(r),i(o),d(r)}catch(e){console.error("Error fetching funding data:",e)}};e&&t()},[e]),t&&s&&null!==c)?(0,r.jsxs)("div",{className:"container mx-auto py-8",children:[(0,r.jsxs)("div",{className:"flex items-center mb-8",children:[(0,r.jsx)(l.default,{src:t.imageUrl,alt:t.title,width:200,height:200}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("p",{className:"text-lg font-semibold",children:["아이디어명: ",s.title]}),(0,r.jsxs)("p",{className:"text-lg font-semibold",children:["펀딩금액 : ",c.amount,"원"]}),(0,r.jsx)(u,{})]})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)(l.default,{src:t.quillImageUrl,alt:"추가이미지",width:300,height:300,className:"mb-4"}),(0,r.jsx)("div",{className:"text-sm text-gray-700 prose",dangerouslySetInnerHTML:{__html:t.textContent}})]})]}):(0,r.jsx)("p",{children:"Loading..."})}},4095:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(4849);function o(){let e=localStorage.getItem("token");if(e)try{let t=e.split(".")[1],n=(0,r.Jx)(t);return JSON.parse(n).username}catch(e){console.error("Error parsing token:",e)}return null}},7907:function(e,t,n){"use strict";var r=n(5313);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},6993:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return r}});let r=n(6921)._(n(4090)).default.createContext(null)},4849:function(e,t,n){"use strict";let r;n.d(t,{Jx:function(){return C}});var o=n(3663).lW;let a="function"==typeof atob,l="function"==typeof o,s="function"==typeof TextDecoder?new TextDecoder:void 0;"function"==typeof TextEncoder&&new TextEncoder;let i=(r={},Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=").forEach((e,t)=>r[e]=t),r),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,u=String.fromCharCode.bind(String),d="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),f=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),h=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,p=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return u((t>>>10)+55296)+u((1023&t)+56320);case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},x=e=>e.replace(h,p),g=a?e=>atob(f(e)):l?e=>o.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!c.test(e))throw TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,n="",r,o;for(let a=0;a<e.length;)t=i[e.charAt(a++)]<<18|i[e.charAt(a++)]<<12|(r=i[e.charAt(a++)])<<6|(o=i[e.charAt(a++)]),n+=64===r?u(t>>16&255):64===o?u(t>>16&255,t>>8&255):u(t>>16&255,t>>8&255,255&t);return n},b=l?e=>d(o.from(e,"base64")):e=>d(g(e).split("").map(e=>e.charCodeAt(0))),m=l?e=>o.from(e,"base64").toString("utf8"):s?e=>s.decode(b(e)):e=>x(g(e)),y=e=>f(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),C=e=>m(y(e))}},function(e){e.O(0,[245,663,703,971,69,744],function(){return e(e.s=9372)}),_N_E=e.O()}]);