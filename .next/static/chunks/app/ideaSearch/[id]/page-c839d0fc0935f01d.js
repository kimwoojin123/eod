(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[103],{2511:function(e,t,r){Promise.resolve().then(r.bind(r,4913))},4913:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(3827),a=r(4090),l=r(7907),s=r(703),o=r(4605),i=r(8245),c=r.n(i);function d(e){let{onDelete:t,onClose:r}=e,[l,s]=(0,a.useState)(!0),o=()=>{r(),s(!1)};return(0,n.jsxs)(c(),{isOpen:l,onRequestClose:o,ariaHideApp:!1,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)",width:"100%",height:"100vh",zIndex:"10",position:"fixed",top:"0",left:"0"},content:{display:"flex",flexDirection:"column",alignItems:"center",width:"360px",height:"180px",zIndex:"150",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"2px 2px 2px rgba(0, 0, 0, 0.25)",backgroundColor:"white",justifyContent:"center",overflow:"auto",whiteSpace:"pre-line"}},contentLabel:"글 삭제 모달",children:[(0,n.jsx)("p",{children:"정말로 삭제하시겠습니까?"}),(0,n.jsx)("button",{className:"w-40 h-10 rounded-2xl bg-red-500 text-white mt-5",onClick:()=>{t(),s(!1)},children:"삭제"}),(0,n.jsx)("button",{className:"w-40 h-10 rounded-2xl bg-gray-200 mt-3",onClick:o,children:"취소"})]})}var u=r(4095);let h=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))});var x=r(137);function p(e){let{ideaId:t}=e,[r,l]=(0,a.useState)(void 0),[s,o]=(0,a.useState)({ideaId:"",username:"",textContent:""}),[i,d]=(0,a.useState)(""),[h,x]=(0,a.useState)(!1),p=()=>x(!0),m=()=>{x(!1),f()},f=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/show-reply/".concat(t)),r=await e.json();l(r)}catch(e){console.error("Error fetching replies:",e)}},[t]);(0,a.useEffect)(()=>{t&&f()},[t,f]);let b=async()=>{try{let e=(0,u.I)(),r=await fetch("/api/idea-reply/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,username:e,textContent:s.textContent})});r.ok?(o({...s,textContent:""}),d("댓글이 등록되었습니다."),p()):console.error("Error adding reply:",r.statusText)}catch(e){console.error("Error adding reply:",e)}};return(0,n.jsxs)("div",{className:"w-screen flex justify-center",children:[(0,n.jsxs)("div",{className:"w-8/12",children:[(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border bg-gray-100 h-8",children:[(0,n.jsx)("th",{className:"border-r text-center",children:"닉네임"}),(0,n.jsx)("th",{className:"flex-grow border-r max-w-5xl text-center",children:"내용"}),(0,n.jsx)("th",{className:"text-center",children:"시간"})]})}),(0,n.jsx)("tbody",{children:r&&Array.isArray(r)&&r.map(e=>(0,n.jsxs)("tr",{className:"border",children:[(0,n.jsx)("td",{className:"pl-2 pr-2 border-r text-center",children:e.username}),(0,n.jsx)("td",{className:"flex-grow border-r max-w-5xl pl-3",children:e.textContent}),(0,n.jsx)("td",{className:"text-center pl-2 ",children:e.addDate})]},e._id))})]}),(0,n.jsxs)("div",{className:"flex justify-center mt-2",children:[(0,n.jsx)("textarea",{value:s.textContent,onChange:e=>o({...s,textContent:e.target.value}),className:"border-gray-500 border w-96 h-8"}),(0,n.jsx)("button",{onClick:b,className:"border ml-2",children:"등록"})]})]}),(0,n.jsxs)(c(),{isOpen:h,onRequestClose:m,ariaHideApp:!1,style:{overlay:{backgroundColor:" rgba(0, 0, 0, 0.4)",width:"100%",height:"100vh",zIndex:"10",position:"fixed",top:"0",left:"0"},content:{display:"flex",flexDirection:"column",alignItems:"center",width:"360px",height:"180px",zIndex:"150",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"2px 2px 2px rgba(0, 0, 0, 0.25)",backgroundColor:"white",justifyContent:"center",overflow:"auto",whiteSpace:"pre-line"}},contentLabel:"댓글 등록 모달",children:[(0,n.jsx)("p",{children:i}),(0,n.jsx)("button",{className:"w-40 h-10 rounded-2xl bg-gray-200 mt-5",onClick:m,children:"닫기"})]})]})}function m(){let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),h=(0,l.usePathname)().split("/").pop();(0,a.useEffect)(()=>{(async()=>{try{let e=(0,u.I)(),r=await fetch("/api/team-manage/".concat(e)),n=await r.json();t(n)}catch(e){console.error("Error fetching teams:",e),d("팀 데이터를 불러오는 중에 오류가 발생했습니다.")}})()},[h]);let x=async()=>{try{(await fetch("/api/team-idea-apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ideaId:h,team:r,content:o})})).ok?d("아이디어 지원이 성공적으로 제출되었습니다."):d("아이디어 지원 제출에 실패했습니다.")}catch(e){console.error("Error submitting idea support:",e),d("아이디어 지원 제출에 실패했습니다.")}};return(0,n.jsxs)("div",{className:"flex flex-col w-96 mb-10",children:[(0,n.jsx)("h1",{className:"text-xl font-bold mb-4",children:"아이디어 지원하기"}),(0,n.jsx)("label",{htmlFor:"team",children:"팀 선택:"}),(0,n.jsxs)("select",{id:"team",value:r,onChange:e=>s(e.target.value),className:"mb-4",children:[(0,n.jsx)("option",{value:"",children:"팀을 선택하세요"}),e.map(e=>(0,n.jsx)("option",{value:e.name,children:e.name},e._id))]}),(0,n.jsx)("label",{htmlFor:"content",children:"내용:"}),(0,n.jsx)("textarea",{id:"content",value:o,onChange:e=>i(e.target.value),rows:5,className:"mb-4 w-full"}),(0,n.jsx)("button",{onClick:x,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"제출하기"}),c&&(0,n.jsx)("p",{className:"text-red-500 mt-4",children:c})]})}function f(){let[e,t]=(0,a.useState)(""),[r,s]=(0,a.useState)(""),o=(0,l.usePathname)().split("/").pop(),i=async()=>{try{let t=(0,u.I)();(await fetch("/api/individual-idea-apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ideaId:o,username:t,content:e})})).ok?s("아이디어 지원이 성공적으로 제출되었습니다."):s("아이디어 지원 제출에 실패했습니다.")}catch(e){console.error("Error submitting idea support:",e),s("아이디어 지원 제출에 실패했습니다.")}};return(0,n.jsxs)("div",{className:"flex flex-col w-96 mb-10",children:[(0,n.jsx)("h1",{className:"text-xl font-bold mb-4",children:"아이디어 지원하기"}),(0,n.jsx)("label",{htmlFor:"content",children:"내용:"}),(0,n.jsx)("textarea",{id:"content",value:e,onChange:e=>t(e.target.value),rows:5,className:"mb-4 w-full"}),(0,n.jsx)("button",{onClick:i,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"제출하기"}),r&&(0,n.jsx)("p",{className:"text-red-500 mt-4",children:r})]})}function b(){var e;let[t,r]=(0,a.useState)(null),[i,b]=(0,a.useState)(!1),[g,j]=(0,a.useState)(""),[w,y]=(0,a.useState)(!1),[C,v]=(0,a.useState)(!1),[N,k]=(0,a.useState)(0),[S,A]=(0,a.useState)(!1),[E,I]=(0,a.useState)(!1),O=(0,l.usePathname)(),T=(0,l.useRouter)(),L=O.split("/").pop(),R=()=>y(!0),F=()=>{y(!1),T.back()};if((0,a.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/id-board/".concat(L)),t=await e.json();r(t),k(t.likes),v(!!t.likedBy&&t.likedBy.includes((0,u.I)()))}catch(e){console.error("Error fetching data:",e)}};L&&e()},[L]),!t)return(0,n.jsx)("div",{children:"Loading..."});let P=async()=>{try{(await fetch("/api/idea-delete/".concat(L),{method:"DELETE"})).ok?j("삭제가 완료되었습니다."):j("삭제에 실패했습니다."),R()}catch(e){console.error("Error deleting data:",e)}},_=async()=>{try{let e=(0,u.I)(),t=await fetch("/api/idea-like/".concat(L),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})});if(t.ok){let e=await t.json();r(t=>t?{...t,likes:e.likes,likedBy:e.likedBy}:t),v(e=>!e),k(e.likes)}else console.error("Error liking idea:",t.statusText)}catch(e){console.error("Error liking idea:",e)}};return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)(o.default,{}),(0,n.jsxs)("div",{className:"w-screen flex justify-center",children:[(0,n.jsxs)("div",{className:"p-4 w-1/2 border",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4 border-b pb-2",children:t.title}),(0,n.jsxs)("p",{className:"text-gray-500 mb-2 border-b pb-2",children:["작성자 : ",t.username]}),(0,n.jsx)("p",{className:"text-gray-500 mb-4 border-b pb-2",children:t.addDate}),t.imageUrl&&(0,n.jsx)(s.default,{src:t.imageUrl,alt:"Image",width:500,height:500,className:"mb-4"}),(0,n.jsx)("div",{className:"prose",dangerouslySetInnerHTML:{__html:t.textContent}})]}),(0,n.jsx)("button",{className:"rounded-3xl ml-10 h-20 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 focus:outline-none focus:shadow-outline",onClick:()=>{A(!1),I(!1),R()},children:"개발 착수 지원"})]}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsxs)("div",{className:"flex justify-center relative left-16 items-center mt-5",children:[(0,n.jsxs)("button",{className:"flex flex-col items-center",onClick:_,children:[C?(0,n.jsx)(x.Z,{className:"w-6 h-6 text-red-500"}):(0,n.jsx)(h,{className:"w-6 h-6"}),(0,n.jsxs)("p",{children:["Likes : ",N]})]}),(0,n.jsx)("div",{className:"relative left-60 mt-2",children:(0,n.jsxs)("div",{className:"w-48 flex justify-between",children:[t.username===(0,u.I)()&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>{T.push("/ideaSearch/".concat(L,"/edit"))},className:"w-20 h-10 rounded-2xl bg-blue-500 text-white",children:"편집"}),(0,n.jsx)("button",{onClick:()=>b(!0),className:"w-20 h-10 rounded-2xl bg-blue-500 text-white",children:"삭제"}),i&&(0,n.jsx)(d,{onDelete:P,onClose:()=>{b(!1)}})]}),(0,n.jsxs)(c(),{isOpen:w,onRequestClose:F,ariaHideApp:!1,style:{overlay:{backgroundColor:" rgba(0, 0, 0, 0.4)",width:"100%",height:"100vh",zIndex:"10",position:"fixed",top:"0",left:"0"},content:{display:"flex",flexDirection:"column",alignItems:"center",width:"360px",height:"180px",zIndex:"150",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"2px 2px 2px rgba(0, 0, 0, 0.25)",backgroundColor:"white",justifyContent:"center",overflow:"auto",whiteSpace:"pre-line"}},contentLabel:"삭제 완료 모달",children:[(0,n.jsx)("p",{children:g}),(0,n.jsx)("button",{className:"w-40 h-10 rounded-2xl bg-gray-200 mt-5",onClick:F,children:"닫기"})]})]})})]})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex ml-80 mt-20",children:["댓글 수 : ",(null===(e=t.replies)||void 0===e?void 0:e.length)||0]}),L&&(0,n.jsx)(p,{ideaId:L})]}),(0,n.jsx)(c(),{isOpen:w,onRequestClose:F,ariaHideApp:!1,style:{overlay:{backgroundColor:" rgba(0, 0, 0, 0.4)",width:"100%",height:"100vh",zIndex:"10",position:"fixed",top:"0",left:"0"},content:{display:"flex",flexDirection:"column",alignItems:"center",width:"600px",height:"720px",zIndex:"150",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"10px",boxShadow:"2px 2px 2px rgba(0, 0, 0, 0.25)",backgroundColor:"white",justifyContent:"center",overflow:"auto",whiteSpace:"pre-line"}},contentLabel:"삭제 완료 모달",children:S?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{}),(0,n.jsx)("button",{className:"w-40 h-10 rounded-2xl bg-gray-200 mt-3",onClick:()=>A(!1),children:"취소"})]}):E?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f,{}),(0,n.jsx)("button",{className:"w-40 h-10 rounded-2xl bg-gray-200 mt-3",onClick:()=>I(!1),children:"취소"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:"w-40 h-10 rounded-2xl bg-blue-500 text-white mt-3",onClick:()=>A(!0),children:"팀으로 지원"}),(0,n.jsx)("button",{className:"w-40 h-10 rounded-2xl bg-blue-500 text-white mt-3",onClick:()=>I(!0),children:"개인으로 지원"}),(0,n.jsx)("button",{className:"w-40 h-10 rounded-2xl bg-gray-200 mt-3",onClick:()=>{y(!1)},children:"닫기"})]})})]})}},4605:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(3827),a=r(7907);function l(){let e=(0,a.useRouter)();return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"25",viewBox:"0 0 15 25",fill:"none",onClick:()=>e.back(),className:"cursor-pointer",children:(0,n.jsx)("path",{d:"M14.1406 3.55235L5.5692 12.1238L14.1406 20.6952L12.4263 24.1238L0.426343 12.1238L12.4263 0.123779L14.1406 3.55235Z",fill:"#23A6F0"})})}},4095:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});var n=r(4849);function a(){let e=localStorage.getItem("token");if(e)try{let t=e.split(".")[1],r=(0,n.Jx)(t);return JSON.parse(r).username}catch(e){console.error("Error parsing token:",e)}return null}},7907:function(e,t,r){"use strict";var n=r(5313);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},6993:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return n}});let n=r(6921)._(r(4090)).default.createContext(null)},137:function(e,t,r){"use strict";var n=r(4090);let a=n.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?n.createElement("title",{id:a},r):null,n.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))});t.Z=a},4849:function(e,t,r){"use strict";let n;r.d(t,{Jx:function(){return w}});var a=r(3663).lW;let l="function"==typeof atob,s="function"==typeof a,o="function"==typeof TextDecoder?new TextDecoder:void 0;"function"==typeof TextEncoder&&new TextEncoder;let i=(n={},Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=").forEach((e,t)=>n[e]=t),n),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,d=String.fromCharCode.bind(String),u="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),h=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),x=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,p=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return d((t>>>10)+55296)+d((1023&t)+56320);case 3:return d((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return d((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},m=e=>e.replace(x,p),f=l?e=>atob(h(e)):s?e=>a.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!c.test(e))throw TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r="",n,a;for(let l=0;l<e.length;)t=i[e.charAt(l++)]<<18|i[e.charAt(l++)]<<12|(n=i[e.charAt(l++)])<<6|(a=i[e.charAt(l++)]),r+=64===n?d(t>>16&255):64===a?d(t>>16&255,t>>8&255):d(t>>16&255,t>>8&255,255&t);return r},b=s?e=>u(a.from(e,"base64")):e=>u(f(e).split("").map(e=>e.charCodeAt(0))),g=s?e=>a.from(e,"base64").toString("utf8"):o?e=>o.decode(b(e)):e=>m(f(e)),j=e=>h(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),w=e=>g(j(e))}},function(e){e.O(0,[245,663,703,971,69,744],function(){return e(e.s=2511)}),_N_E=e.O()}]);